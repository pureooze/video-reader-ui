---
layout: base.njk
title: Video Reader
---

<script>
	async function fetchVideos() {
		const url = document.getElementById('url-input').value;

		const response = await fetch('https://cukc1c929i.execute-api.us-east-2.amazonaws.com/default/videoreader?uri=' + url);
		const results = response.json();

		const resultsListElement = document.getElementById('results-list');
		resultsListElement.replaceChildren([]);

		for( let result of results) {
			const container = document.createElement("tr");
			container.classList.add("result")
			const name = "asd";

			const url = document.createElement("td");
			const anchor = document.createElement("a");
			anchor.setAttribute("href", result.Url);
			anchor.innerHTML = 'Download';
			url.appendChild(anchor);

			const codec = document.createElement("td");
			codec.innerHTML = result.Codec;

			const label = document.createElement("td");
			label.innerHTML = result.VideoQuality.Label;

			const framerate = document.createElement("td");
			framerate.innerHTML = result.VideoQuality.Framerate

			container.appendChild(url);
			container.appendChild(codec);
			container.appendChild(label);
			container.appendChild(framerate);
			resultsListElement.appendChild(container);
		}


	}
</script>

<style>
	.results-list {
		background-color: #f3f3f3
	}
</style>

<div>
	<h1 class="page-title">Video Reader</h1>
	<div class="form-and-result-container" id="form-and-result-container">
		<div class="form">
			<label for="url">Video Url:</label>
			<input type="text" name="url" id="url-input"/>
			<button onclick="fetchVideos()">Fetch</button>
		</div>
		<table class="results-list" id="results-list"></table>
	</div>
</div>